<!DOCTYPE html>
<html>
  <head>
    <title>IFE'S GALLERY</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik+Scribble&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Londrina+Outline&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <meta name="viewport" content="width = device-width, initial-scale = 1" />
    <meta charset="UTF-8" />
  </head>

  <body>
    <div class="header-div">
      <h4>VIEW OUR GALLERY BELOW</h4>
    </div>
    <p class="pp">Choose a category:</p>

    <div class="select-container"></div>

    <p class="centered or">~ or ~</p>
    <div class="righted">
      <button class="others-btn"><a href="/videos">Videos</a></button>
    </div>

    <div class="popup-container">
      <div class="popup">
        <h3>You Must Pay To Proceed</h3>
        <p>The Sum Of ₦2000 is required to get access to our gallery</p>
        <button onclick="sendOtp()">Pay ₦2000</button>
      </div>
    </div>

    <script>
      const popup = document.querySelector(".popup");

      const token = sessionStorage.setItem("Access", true);

      const openPopup = () => {
        document.querySelector(".popup").style.visibility = "visible";
      };

      if (!token) {
        document.querySelector(".select-container").innerHTML = `
        
      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="images/photoshoot-image.jpg"
            alt="Photoshoot Image"
            class="select-img"
          />
          <p class="p-absolute">Studio Photoshoot</p></a
        >
      </div>
      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="images/event-image.jpg"
            alt="Event Photos"
            class="select-img"
          />
          <p class="p-absolute">Event Photography</p></a
        >
      </div>

      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="gallery-images/g-image-1.jpg"
            alt="Traditional Wedding photos"
            class="select-img"
          />
          <p class="p-absolute">Traditional Potrait</p></a
        >
      </div>
      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="images/creative-image.jpg"
            alt="Creative Photos"
            class="select-img"
          />
          <p class="p-absolute">Creative Photography</p></a
        >
      </div>

      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="images/lifestyle-image.jpg"
            alt="Lifestyle Photos"
            class="select-img"
          />
          <p class="p-absolute">Lifestyle Photography</p></a
        >
      </div>
      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="images/product-image.jpg"
            alt="Product Photos"
            class="select-img"
          />
          <p class="p-absolute">Product Photography</p></a
        >
      </div>

      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="images/frame.jpg"
            alt="Lifestyle Photos"
            class="select-img"
          />
          <p class="p-absolute">Frames</p></a
        >
      </div>
      <div class="select-service">
        <a onclick="openPopup();"
          ><img
            src="gallery-images/kid-image.jpg"
            alt="Product Photos"
            class="select-img"
          />
          <p class="p-absolute">Kids Photography</p></a
        >
      </div>
    
        `;
      } else {
        document.querySelector(".select-container").innerHTML = `
            
      <div class="select-service">
        <a href="/photoshoot-image"
          ><img
            src="images/photoshoot-image.jpg"
            alt="Photoshoot Image"
            class="select-img"
          />
          <p class="p-absolute">Studio Photoshoot</p></a
        >
      </div>
      <div class="select-service">
        <a href="/event-image"
          ><img
            src="images/event-image.jpg"
            alt="Event Photos"
            class="select-img"
          />
          <p class="p-absolute">Event Photography</p></a
        >
      </div>

      <div class="select-service">
        <a href="/traditional-potrait"
          ><img
            src="gallery-images/g-image-1.jpg"
            alt="Traditional Wedding photos"
            class="select-img"
          />
          <p class="p-absolute">Traditional Potrait</p></a
        >
      </div>
      <div class="select-service">
        <a href="/creative-image"
          ><img
            src="images/creative-image.jpg"
            alt="Creative Photos"
            class="select-img"
          />
          <p class="p-absolute">Creative Photography</p></a
        >
      </div>

      <div class="select-service">
        <a href="/lifestyle-image"
          ><img
            src="images/lifestyle-image.jpg"
            alt="Lifestyle Photos"
            class="select-img"
          />
          <p class="p-absolute">Lifestyle Photography</p></a
        >
      </div>
      <div class="select-service">
        <a href="/product-image"
          ><img
            src="images/product-image.jpg"
            alt="Product Photos"
            class="select-img"
          />
          <p class="p-absolute">Product Photography</p></a
        >
      </div>

      <div class="select-service">
        <a href="/frames-image"
          ><img
            src="images/frame.jpg"
            alt="Lifestyle Photos"
            class="select-img"
          />
          <p class="p-absolute">Frames</p></a
        >
      </div>
      <div class="select-service">
        <a href="/kids-image"
          ><img
            src="gallery-images/kid-image.jpg"
            alt="Product Photos"
            class="select-img"
          />
          <p class="p-absolute">Kids Photography</p></a
        >
      </div>
    
        `;
      }

      const sendOtp = async () => {
        try {
          const response = await fetch("/send-otp", {
            method: "POST",
          });

          const data = await response.json();

          sessionStorage.setItem("PIN", data);

          popup.innerHTML = ` 
          <h3>Enter PIN to continue</h3>
          <p>Contact Ife Oluwa For The Pin</p>
          <input class="pin-input" type="number" placeholder="Input Pin Below">
          <button onclick="confirm()">Confirm Pin</button>`;

          window.location.assign(
            "https://api.whatsapp.com/send/?phone=9037326585&text=I+am+interested+in+viewing+your+gallery+by+paying+the+sum+of+Two+Thousand+Naira&type=phone_number&app_absent=0"
          );
        } catch (error) {
          alert("Error Completing Payment");
          console.log(error);
        }
      };

      function getOtp() {
        const code = sessionStorage.getItem("PIN");

        if (!code) return null;

        return code; // OTP cookie not found
      }

      function confirm() {
        const userPin = document.querySelector(".pin-input").value;

        const pin = getOtp();

        console.log(pin, userPin);

        if (userPin === pin) {
          sessionStorage.setItem("Access", true);

          alert("Request Successful");

          document.querySelector(".popup-container").style.visibility =
            "hidden";

          window.location.reload();
        } else {
          sessionStorage.setItem("Access", false);

          alert("Pin Incorrect");
        }
      }
    </script>
  </body>
</html>
